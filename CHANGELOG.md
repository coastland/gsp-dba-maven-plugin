# Changelog

このプロジェクトに対するすべての重要な変更は、このファイルに文書化されます。

## 4.6.0 (2023-01-31)
### 更新内容
#### 変更
- H2 Database のバージョンを 2.1.214 に更新しました。
  - H2 Databaseのバージョンが古かったため、最新バージョンに更新しました。
- JDBC接続URLに複数のオプションを指定した場合に動作するように変更しました。
  - JDBC接続URLに複数のオプションを"&"で繋げたURLを指定した場合、generate-entityのゴールを実行する際、中間ファイルとして生成されるXMLに"&"がそのまま出力されてXMLのパースに失敗していました。複数オプションを指定しても正常に処理できるよう"&"をエスケープして出力するように対応しました。
- Oracle18c 以降のバージョンでexport-schema、import-schemaを実行できるよう対応しました。
  - Oracle18c以降ではexport-schema、import-schemaのゴールを実行する際に接続文字列を必要としますが、今までは接続文字列を設定することができなかったため処理に失敗していました。接続文字列を設定できるようにすることでOracle18c以降のバージョンでexport-schema、import-schemaが正常に実行できるよう対応しました。
- generate-entityで生成されるクラスについて、主キーカラムのプロパティに設定されるアノテーションを修正しました。
    - これまでは、数値型の主キーカラムのプロパティには一律で`@GeneratedValue(strategy = GenerationType.IDENTITY)`が付けられていました。
    - これを、そのカラムが自動採番される場合だけ`@GeneratedValue(strategy = GenerationType.IDENTITY)`を付けるように修正しました。
    - また、Oracleの場合はシーケンスオブジェクトで主キーカラムを採番する前提とした出力になっていましたが、これを廃止しました。
        - 12c以降はOracleでもカラムの自動採番が可能であるため。
        - ただし、Oracleの場合は自動採番されるカラムであっても`@GeneratedValue(strategy = GenerationType.IDENTITY)`は設定されません。
        - 詳細は[主キーのプロパティに設定されるアノテーションについて](recipe/spec-generatedEntity.md#主キーのプロパティに設定されるアノテーションについて)を参照してください。

## 4.5.0 (2022-03-24)
### 更新内容
#### 変更
- 依存する Seasar の Maven リポジトリのURLを変更しました。
  - Maven は3.8.1からHTTP通信でのリポジトリへのアクセスが遮断されるようになりました。
    Maven3.8.1 以降のバージョンでも依存する Seasar のリポジトリにアクセスできるようURLをHTTPSに変更しました。

## 4.4.1 (2020-09-24)
### 更新内容
#### 変更
- 生成されるALTER TABLEの末尾に「;」が付与されないケースに対応しました。
  - 生成されるALTER TABLEの末尾に「;」が付与されないケースがあり、生成されたDDLを手動で実行する際に不便でした。
    これまで「;」が付与されなかったケースについても付与されるように改善しました。

- Dialectのカスタマイズ手順の修正
  - Mavenの仕様上、gsp-dba-maven-pluginの依存関係にカスタマイズしたDialectを含めるためには一部のケースを除き、Dialectを格納したjarファイルの作成が必要です。
   jarファイルの作成が必要な旨の記載が無かったため、明記しました。